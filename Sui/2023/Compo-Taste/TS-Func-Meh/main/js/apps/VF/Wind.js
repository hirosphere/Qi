import { Leaf } from "../../meh/index.js";
import { Range } from "../../range.js";
import { Pitch } from "./vf-models.js";
import * as Audio from "./Audio.js";
const log = console.log;
export var Wind;
(function (Wind) {
    class Value {
        level = new Leaf.Number(0.7);
        pitch = new Pitch();
        width = new Leaf.Number(0.5);
    }
    const SUI = (value) => {
        const def = {
            output: { main: "Level" },
            constants: {
                pitch: { value: value.pitch, cv: v => (v - 69) * 100, time: 0.004 },
                width: { value: value.width },
                level: { value: value.level, gain: 0.25 }
            },
            nodes: {
                "Sub": { type: SUISub },
                "Osc": { type: "Osc", params: { detune: ["pitch"] } },
                "Osc2": { type: "Osc", params: { detune: ["pitch", 5] } },
                "Osc3": { type: "Osc", params: { detune: ["pitch", 10] } },
                "Osc4": { type: "Osc", params: { detune: ["pitch", 30] } },
                "Level": { type: "Gain", sources: ["Osc", "Osc2", "Osc3", "Osc4"], params: { gain: ["level"] } }
            }
        };
        return def;
    };
    const SUISub = {
        output: { main: "Osc1" },
        nodes: {
            Osc1: { type: "Osc" }
        }
    };
    Wind.UI = (ac) => {
        const value = new Value();
        const sui = Audio.create(SUI(value), ac);
        const uim = {
            volume: new Range.UIM({ title: "Volume", value: value.level, max: 1, step: 0.01 }),
            pitch: new Range.UIM({ title: "Pitch", value: value.pitch, min: 9, max: 129, step: 0.1 }),
            width: new Range.UIM({ title: "Witdh", value: value.width, min: 0, max: 1, step: 0.01 }),
        };
        const header = { type: "h2", text: "Wind" };
        const pitch = PitchPane(value.pitch);
        const rc = [
            Range.UI(uim.volume),
            Range.UI(uim.pitch),
            Range.UI(uim.width),
        ];
        const ranges = { type: "div", class: "ranges", parts: rc };
        return { type: "div", class: "vf-pwa applet", parts: [header, pitch, ranges] };
    };
})(Wind || (Wind = {}));
const PitchPane = (value) => {
    const pitch = PropPane("Pitch", value, "");
    const freq = PropPane("Freq", value.freq, "Hz");
    const key = PropPane("Key", value.note, "");
    return { type: "div", class: "pitch-disp", parts: [pitch, freq, key] };
};
const PropPane = (title, value, unit) => {
    const parts = [
        { type: "span", class: "title", text: title },
        " ",
        { type: "span", class: "value", text: value },
        { type: "span", class: "unit", text: unit }
    ];
    return { type: "div", class: "prop", parts };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV2luZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3RzLXNyYy9hcHBzL1ZGL1dpbmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFNLElBQUksRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2QyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDdkMsT0FBTyxLQUFLLEtBQUssTUFBTSxZQUFZLENBQUM7QUFFcEMsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUV4QixNQUFNLEtBQVcsSUFBSSxDQXVFcEI7QUF2RUQsV0FBaUIsSUFBSTtJQUVwQixNQUFNLEtBQUs7UUFFVixLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFFLEdBQUcsQ0FBRSxDQUFDO1FBQy9CLEtBQUssR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1FBQ3BCLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUUsR0FBRyxDQUFFLENBQUM7S0FDL0I7SUFFRCxNQUFNLEdBQUcsR0FBRyxDQUFFLEtBQWEsRUFBRyxFQUFFO1FBRS9CLE1BQU0sR0FBRyxHQUNUO1lBQ0MsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRTtZQUV6QixTQUFTLEVBQ1Q7Z0JBQ0MsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBRSxDQUFDLEdBQUcsRUFBRSxDQUFFLEdBQUcsR0FBRyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUU7Z0JBQ3JFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFO2dCQUM3QixLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxJ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