<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>地震波形音</title>
<script src="../qrafts/prime.js"></script>
<script src="../qrafts/EQWave.js"></script>
<script src="InstSet.js"></script>
<script src="Synth.js"></script>
<script src="UI.js"></script>
<script src="App.js"></script>
<script src="PartPanes.js"></script>
<link rel="stylesheet" type="text/css" href="../qrafts/qrafts.css"/>
</head>
<body>
<header>
<h1>Schin-These 01</h1>

</header>
<article id="Content"></article>
<script>

function main()
{
	new AppPane( q.id( "Content" ) );
}

function AppPane( com )
{
	
	//  data:audio/wav;base64,UklGRiQXAABXQVZFZm10IBAAA..


	let self = this;
	let voice = new InstSet.WaveVoice();
	//let voice = new InstSet.OscVoice();
	let app = new App();

	let e = q.div( com );
	{
		var b = q.div( e );
		q.e( "checkbox", b ).onchange = function() {  };
		q.check( b ).onchange = function() { voice.SetHold( this.checked ); };
		q.check( b ).onchange = function() { voice.SetMode( this.checked ? 1 : 0 ); };
		q.range( b, { "attrs": { "min": 15, "max": 5000, "step": 1 }, "style": { "width": "400px" } } )
		.oninput = function() { voice.SetCarr( this.value ); };
	}
	{
		var b = q.div( e );
		new TouchButton( "1", b, voice, 1 );
		new TouchButton( "2", b, voice, 2 );
		new TouchButton( "4", b, voice, 4 );
		new TouchButton( "12.5", b, voice, 12.5 );
		new TouchButton( "15", b, voice, 15 );
		new TouchButton( "20", b, voice, 20 );
		new TouchButton( "25", b, voice, 25 );
		new TouchButton( "30", b, voice, 30 );
		new TouchButton( "35", b, voice, 35 );
		new TouchButton( "40", b, voice, 40 );
		new TouchButton( "45", b, voice, 45 );
		new TouchButton( "50", b, voice, 50 );
		new TouchButton( "60", b, voice, 60 );
		new TouchButton( "70", b, voice, 70 );
		new TouchButton( "80", b, voice, 80 );
		new TouchButton( "100", b, voice, 100 );
		new TouchButton( "200", b, voice, 200 );
		new TouchButton( "300", b, voice, 300 );
		new TouchButton( "400", b, voice, 400 );
		new TouchButton( "600", b, voice, 600 );
		new TouchButton( "440", b, voice, 440 );
		new TouchButton( "480", b, voice, 480 );
		new TouchButton( "1000", b, voice, 1000 );
		new TouchButton( "1050", b, voice, 1050 );
		new TouchButton( "2100", b, voice, 2100 );
	}

}

function TouchButton( caption, com, voice, freq )
{
	let e = q.button( com, { "text": caption } );
	
	e.addEventListener( "touchstart", noteon );
	e.addEventListener( "touchend", noteoff );
	
	e.addEventListener( "mousedown", noteon );
	e.addEventListener( "mouseleave", noteoff );
	e.addEventListener( "mouseup", noteoff );

	function noteon( ev ) {  ev.preventDefault();  voice.NoteOn( freq );  }
	function noteoff( ev ) {  ev.preventDefault();  voice.NoteOff();  }
}

function sp( ev ) {  ev.stopPropagation();  }

document.body.onload = main;

</script>
</body>
</html>